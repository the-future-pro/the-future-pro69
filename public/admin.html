<!doctype html>
<html lang="ro">
<meta charset="utf-8">
<title>Admin Stats</title>
<link rel="stylesheet" href="/style.css">
<style>
  .wrap{max-width:900px;margin:24px auto;padding:16px}
  pre{background:#0f172a;border:1px solid #223047;border-radius:12px;padding:16px;overflow:auto;color:#e6e9ef}
  button{padding:10px 16px;border-radius:10px;border:1px solid #2a3343;background:#1e293b;color:#e6e9ef;cursor:pointer}
</style>
<div class="wrap">
  <h1>Admin Stats</h1>
  <button id="btn">Refresh</button>
  <pre id="out">Aștept comanda…</pre>
</div>
<script>
  const out = document.getElementById('out');
  const show = (x) => out.textContent = typeof x==='string' ? x : JSON.stringify(x, null, 2);

  async function load() {
    let token = localStorage.getItem('ADMIN_TOKEN');
    if (!token) {
      token = prompt('Admin token (setat în Render > ENV):', 'admin123') || '';
      localStorage.setItem('ADMIN_TOKEN', token);
    }
    try {
      const r = await fetch('/api/admin/stats?token=' + encodeURIComponent(token));
      show(await r.json());
    } catch (e) {
      show(String(e));
    }
  }
  document.getElementById('btn').onclick = load;
  load();
</script>
</html>
